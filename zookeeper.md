---
title: ZooKeeper
date: 2018-08-23 20:55:04
tags: [zookeeper]
categories: [zookeeper]
toc: true
mathjax: true
---
# 引子
   ###   1、ACID
    （1）原子性：任何一项操作的失败都将导致整个事物的失败，同时其他已经被执行的操作都会被撤销并回滚，只有所有的操作都成功，整个事物才算成功。要么全部执行成功，要么全部不执行。

    （2）一致性：事务的一致性是指事务执行的过程中不能破坏数据库的完整性和一致性，也就是说事物的执行是使数据库从一致性到另一个一致性。如果数据库在执行过程中发生故障，有些事务尚未完成就被迫中断了，这些未完成的事务则数据库的一些操作已经写入数据库,这个数据库就是一致状态

    （3）隔离性：事务的隔离性是指在并发状态下，一个事务的执行不能被其他事务干扰。数据库的隔离级别有4种，

         读未提交：该隔离级别可以脏读。

         读已提交：只允许获取已经被提交的数据。

         可重复读：在事物处理过程中，多次读取同一个数据时，其值都和开始时刻一致的，但有可能出现幻影数据。

         串行化：所有的事物都被串行执行，即事物只能一个接一个地进行处理，不能并发执行。

    （4）持久性：是指某一事物一旦提交，那它在数据库中对应的状态变更应该就是永久性的

   ###  2、CAP
        CAP：一个分布式系统不可能同时满足一致性 ，可用性，分组容错性，最多只能满足其中的两项

        一致性：在分布式环境中一致性是指多个副本之间能否保持一致的特性。

        可用性：是指系统提供的服务必须一致处于可用的状态，对于用户的每一个请求总能在一定时间内返回结果。

        分区容错性：分区容错性约束了一个分布式系统在遇到任何网络分区故障时需要仍然对外提供能够满足一致性和可用性的服务，除非是整个网络都发生了故障。


| 放弃CAP 定理      |      说明   |
|------------------|-------------|
|放弃C         |  如果希望避免系统出现分区容错性，一种较为简单的做法就是将所有的数据都放在一个节点上。 |
|放弃A         |  如果放弃可用性，如果遇到网络故障的时候，那么受到影响的服务需要等待一段时间，因此在等待的时间内系统无法正常对外提供服务。   |
|放弃P         |如果放弃一致性是放弃强一致性，而不是放弃最终一致性。 |
### 3、BASE
    BASE是Basically Available （基本可用）、Soft state（软状态）和Eventually consistent（最终一致性）

    基本可用：是指分布式系统中出现不可预知故障的时候，允许损失部分可用性--但不是等价于系统不可用。
